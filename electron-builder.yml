copyright: Copyright Â© 2021 SUSE
productName: Rancher Desktop
icon: ./resources/icons/logo-square-512.png
appId: io.rancherdesktop.app
asar: true
extraResources:
- resources/
- '!resources/darwin/lima-*.tgz'
- '!resources/linux/lima-*.tgz'
- '!resources/host/'
files:
- dist/app/**/*
mac:
  entitlements: "build/entitlements.mac.plist"
  entitlementsInherit: "build/entitlements.mac.inherit.plist"
  darkModeSupport: true
  hardenedRuntime: true
  gatekeeperAssess: false
  extendInfo:
    NSCameraUsageDescription: ~
    NSMicrophoneUsageDescription: ~
  icon: ./resources/icons/mac-icon.png
  target: [ dmg, zip ]
afterSign: "scripts/notarize.js"
win:
  target: [ nsis, zip ]
  signingHashAlgorithms: [ sha256 ] # We only support Windows 10 + WSL2
  requestedExecutionLevel: asInvoker # The _app_ doesn't need privileges
linux:
  category: Utility
  executableName: rancher-desktop
  artifactName: ${name}-${version}-linux.zip
  extraResources:
  - from: packaging/linux/rancher-desktop.desktop
    to: resources/linux/rancher-desktop.desktop
  target: [ zip ]
nsis:
  license: LICENSE
  include: build/installer.nsh
  oneClick: false # Needed for restart prompt
# Instead of generating app-update.yml through this and LonghornPublisher
# as we previously have, we hard-code it. This is because we were unable
# to generate app-update.yml for the zip file that we use for Linux
# (and therefore AppImage) builds due to inflexibility of electron-builder.
# The end result is that updates do not work for AppImage builds.
# For more information please see
# https://github.com/electron-userland/electron-builder/issues/4233
#publish:
#  provider: custom
#  upgradeServer: https://desktop.version.rancher.io/v1/checkupgrade
#  vPrefixedTagName: true
